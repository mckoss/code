(function(g){function i(c){if(!c)return 0;c=c.split(".");return 1E4*parseInt(c[0])+100*parseInt(c[1])+parseInt(c[2])}function d(c){for(var c=c.replace(/-/g,"_"),c=c.split("."),b=f,h=0;h<c.length;h++)b[c[h]]===void 0&&(b[c[h]]=new k),b=b[c[h]];return b}var f=g.namespace,k;if(f){if(i("3.0.0")<=i(f.VERSION))return;k=f.constructor}else k=function(){},g.namespace=f=new k;f.VERSION="3.0.0";g=k.prototype;g.module=function(c,b){var h=d(c);b&&b(h,d);return h};g.extend=function(c){for(var b in c)c.hasOwnProperty(b)&&
(this[b]=c[b])}})(this);
namespace.module("org.startpad.types",function(g){function i(b,c){return d(b)==c}function d(b){if(b===void 0)return"undefined";if(b===null)return"null";var c=Object.prototype.toString.call(b).match(/\[object (.*)\]/)[1].toLowerCase();f.indexOf(c)==-1&&(c=typeof b);return c}g.extend({VERSION:"0.1.0",isArguments:function(b){return i(b,"arguments")},isArray:function(b){return i(b,"array")},copyArray:function(b){return Array.prototype.slice.call(b)},isType:i,typeOf:d,extend:function(b){var h,g,d,e;b===
void 0&&(b={});for(h=1;h<arguments.length;h++){d=arguments[h];for(e in d)d.hasOwnProperty(e)&&(b[e]=d[e]);if(k)for(g=0;g<c.length;g++)e=c[g],d.hasOwnProperty(e)&&(b[e]=d[e])}return b},project:function(b,c){for(var g={},d=0;d<c.length;d++){var e=c[d];b&&b.hasOwnProperty(e)&&(g[e]=b[e])}return g},getFunctionName:function(b){if(typeof b=="function"){b=b.toString().match(/function\s*(\S+)\s*\(/);if(!b)return"";return b[1]}}});var f=["number","string","boolean","array","function","date","regexp","arguments",
"undefined","null"],k=!{toString:!0}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","constructor","isPrototypeOf"]});
namespace.module("org.startpad.funcs",function(g,i){function d(e){if(!e)return 0;e=e.split(".");return 1E4*parseInt(e[0])+100*parseInt(e[1])+parseInt(e[2])}function f(e,b,c,g){if(!(e._patches&&d(e._patches[b])>=d(c)))e._patches=e._patches||{},e._patches[b]=c,k(e,g)}function k(e,b){l.extend(e.prototype,b)}function c(b,c){function g(b,e){for(var c=l.copyArray(b),e=l.copyArray(e),d=0;d<c.length;d++)c[d]===void 0&&(c[d]=e.shift());return c.concat(e)}var d;d=arguments.length==3&&l.isArguments(arguments[2])?
Array.prototype.slice.call(arguments[2],self1):Array.prototype.slice.call(arguments,2);return function(){return b.apply(c||this,g(d,arguments))}}function b(b,c){function d(){return c.call(this,b,arguments,d)}c.call(b,void 0,arguments,d);return d}function h(b){function c(){}c.prototype=b;return new c}function n(b,c,d){b.prototype=h(c.prototype);b.prototype.constructor=b;b.prototype._super=c;b.prototype._proto=c.prototype;k(b,d)}var l=i("org.startpad.types");g.extend({VERSION:"0.2.1",methods:k,bind:c,
decorate:b,shadow:h,subclass:n,numericVersion:d,monkeyPatch:f,patch:function(){f(Function,"org.startpad.funcs",g.VERSION,{methods:function(b){k(this,b)},curry:function(){var b=[this,void 0].concat(l.copyArray(arguments));return c.apply(void 0,b)},curryThis:function(){var b=l.copyArray(arguments);b.unshift(this);return c.apply(void 0,b)},decorate:function(c){return b(this,c)},subclass:function(b,c){return n(this,b,c)}});return g}})});(function(g){g.fn.autoResize=function(i){var d=g.extend({onResize:function(){},animate:!0,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1E3},i);this.filter("textarea").each(function(){var f=g(this).css({resize:"none","overflow-y":"hidden"}),i=f.height(),c=function(){var b={};g.each(["height","width","lineHeight","textDecoration","letterSpacing"],function(c,d){b[d]=f.css(d)});return f.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(b).attr("tabIndex",
"-1").insertBefore(f)}(),b=null,h=function(){c.height(0).val(g(this).val()).scrollTop(1E4);var h=Math.max(c.scrollTop(),i)+d.extraSpace,l=g(this).add(c);if(h>=d.limit)g(this).css("overflow-y",""),h=d.limit;b!==h&&(b=h,d.onResize.call(this),d.animate&&f.css("display")==="block"?l.stop().animate({height:h},d.animateDuration,d.animateCallback):l.height(h))};f.unbind(".dynSiz").bind("keyup.dynSiz",h).bind("keydown.dynSiz",h).bind("change.dynSiz",h).trigger("change.dynSiz")});return this}})(jQuery);var Showdown={converter:function(){var g,i,d,f=0;this.makeHtml=function(a){g=[];i=[];d=[];a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=v("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=c(a);a=k(a);a=h(a);a=w(a);a=a.replace(/~D/g,"$$");return a=a.replace(/~T/g,"~")};var k=function(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(a,b,c,d,e){b=b.toLowerCase();g[b]=
x(c);if(d)return d+e;else e&&(i[b]=e.replace(/"/g,"&quot;"));return""})},c=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,b);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,b);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,b);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,
b);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,b);return a=a.replace(/\n\n/g,"\n")},b=function(a,b){var j;j=b.replace(/\n\n/g,"\n");j=j.replace(/^\n/,"");j=j.replace(/\n+$/g,"");return j="\n\n~K"+(d.push(j)-1)+"K\n\n"},h=function(a){for(var a=z(a),b=o("<hr />"),a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b),a=u(a),a=A(a),a=C(a),a=c(a),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,
""),j=a.split(/\n{2,}/g),a=[],b=j.length,m=0;m<b;m++){var e=j[m];e.search(/~K(\d+)K/g)>=0?a.push(e):e.search(/\S/)>=0&&(e=n(e),e=e.replace(/^([ \t]*)/g,"<p>"),e+="</p>",a.push(e))}b=a.length;for(m=0;m<b;m++)for(;a[m].search(/~K(\d+)K/)>=0;)j=d[RegExp.$1],j=j.replace(/\$/g,"$$$$"),a[m]=a[m].replace(/~K\d+K/,j);return a=a.join("\n\n")},n=function(a){a=B(a);a=l(a);a=a.replace(/\\(\\)/g,r);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,r);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,t);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
t);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,e);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,e);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,e);a=D(a);a=x(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},l=function(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,
function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=p(a,"\\`*_")})},e=function(a,b,j,c,d,e,h,f){f==void 0&&(f="");a=c.toLowerCase();if(d=="")if(a==""&&(a=j.toLowerCase().replace(/ ?\n/g," ")),g[a]!=void 0)d=g[a],i[a]!=void 0&&(f=i[a]);else if(b.search(/\(\s*\)$/m)>-1)d="";else return b;d=p(d,"*_");b='<a href="'+d+'"';f!=""&&(f=f.replace(/"/g,"&quot;"),f=p(f,"*_"),b+=' title="'+f+'"');b+=">"+j+"</a>";return b},t=function(a,b,j,c,d,e,h,f){a=j;c=c.toLowerCase();f||(f="");if(d=="")if(c==""&&
(c=a.toLowerCase().replace(/ ?\n/g," ")),g[c]!=void 0)d=g[c],i[c]!=void 0&&(f=i[c]);else return b;a=a.replace(/"/g,"&quot;");d=p(d,"*_");b='<img src="'+d+'" alt="'+a+'"';f=f.replace(/"/g,"&quot;");f=p(f,"*_");b+=' title="'+f+'"';b+=" />";return b},z=function(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return o("<h1>"+n(b)+"</h1>")});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return o("<h2>"+n(b)+"</h2>")});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,
b,c){a=b.length;return o("<h"+a+">"+n(c)+"</h"+a+">")})},q,u=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;f?a=a.replace(b,function(a,b,c){a=b;c=c.search(/[*+-]/g)>-1?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=q(a);a=a.replace(/\s+$/,"");return"<"+c+">"+a+"</"+c+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){a=c;d=d.search(/[*+-]/g)>
-1?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=q(a);return b+"<"+d+">\n"+a+"</"+d+">\n"}));return a=a.replace(/~0/,"")};q=function(a){f++;a=a.replace(/\n{2,}$/,"\n");a+="~0";a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,d,e){a=e;b||a.search(/\n{2,}/)>-1?a=h(s(a)):(a=u(s(a)),a=a.replace(/\n$/,""),a=n(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");f--;return a};var A=function(a){a+="~0";a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,
function(a,b,c){a=y(s(b));a=v(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");return o("<pre><code>"+a+"\n</code></pre>")+c});return a=a.replace(/~0/,"")},o=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(d.push(a)-1)+"K\n\n"},B=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d){a=d.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=y(a);return b+"<code>"+a+"</code>"})},y=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,
"&gt;");return a=p(a,"*_{}[]\\",!1)},C=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=h(c);c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return o("<blockquote>\n"+c+"\n</blockquote>")})},x=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=
a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},D=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return E(w(b))})},E=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&15))+";"},function(a){return a}],a=("mailto:"+a).replace(/./g,function(a){if(a=="@")a=b[Math.floor(Math.random()*
2)](a);else if(a!=":")var c=Math.random(),a=c>0.9?b[2](a):c>0.45?b[1](a):b[0](a);return a});return a=('<a href="'+a+'">'+a+"</a>").replace(/">.+:/g,'">')},w=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})},s=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},v=function(a){a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b){for(var c=b,d=4-c.length%4,e=0;e<d;e++)c+=" ";
return c});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},p=function(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(RegExp(b,"g"),r)},r=function(a,b){return"~E"+b.charCodeAt(0)+"E"}}};namespace.module("com.pageforest.code",function(g,i){function d(){}function f(){typeof applicationCache!="undefined"&&(applicationCache.status==applicationCache.UPDATEREADY?(applicationCache.swapCache(),location.reload()):applicationCache.addEventListener("updateready",f,!1))}var k=i("org.startpad.dom"),c=i("com.pageforest.client");g.extend({main:function(){f();h=k.bindIDs();code=new d;b=new c.Client(code);b.addAppBar()}});var b;new Showdown.converter;var h;d.methods({setDoc:function(b){h.code.value=
b.blob.code},getDoc:function(){return{blob:{version:1,markdown:h.code.value},readers:["public"]}}})});